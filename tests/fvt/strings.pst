@import("fvt-assert.pst");

void runner() {

    string s = ""
        + "abc XYZ 123 .?" // ASCII
        + " ëËæÆçÇìÌ" // accents
        + " あ ア 阿 아" // CJK

        // TODO: behavior for cyrillic is different in various target languages
        // + " А" // Cyrillic
        ;

    assertEqStr("ABC XYZ 123 .? ËËÆÆÇÇÌÌ あ ア 阿 아", s.ToUpper());
    assertEqStr("abc xyz 123 .? ëëææççìì あ ア 阿 아", s.ToLower());

    // Trim
    string FW_SPACE = ""; // "　";
    string padding = " \r\n\t" + FW_SPACE;
    string testStr = padding + "." + padding;
    assertEqStr(
        readableWrap("."),
        readableWrap(testStr.Trim()));
    assertEqStr(
        readableWrap("." + padding),
        readableWrap(testStr.TrimStart()));
    assertEqStr(
        readableWrap(padding + "."),
        readableWrap(testStr.TrimEnd()));

    // Reverse
    assertEqStr("321 cba", "abc 123".Reverse());
    assertEqStr("おえういあ 321 cba", "abc 123 あいうえお".Reverse());
}

string readableWrap(string v) {
    return "[" + v + "]";
}
